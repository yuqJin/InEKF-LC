function [y] = localization_h(state)
% LOCALIZATION_H  观测函数：从系统状态生成测量值
%
% 语法:
%   y = localization_h(state)
%
% 输入参数:
%   state - 当前状态（结构体），包含：
%           .Rot: 2x2 旋转矩阵（方向，属于 SO(2)）
%           .p:   2x1 位置向量 [x; y]
%
% 输出参数:
%   y - 模拟的测量输出（2×1 向量），即当前时刻的观测值
%
% 功能说明：
%   该函数定义了系统的**观测模型**，即：从真实状态映射到传感器读数。
%   在本例中，假设使用 GPS 进行定位，其仅能测量机器人在世界坐标系中的位置 (x, y)，
%   而无法直接观测方向（航向角）。因此，观测函数 h(state) = p。
%
% 数学表达：
%   y = h(state) = state.p
%
% 应用场景：
%   - EKF/UKF/InEKF 的更新步骤中调用此函数计算预测观测值
%   - 测量仿真中用于生成带噪声的 GPS 数据（见 localization_simu_h）
%   - 评估滤波器性能时计算观测残差（innovation）

%% 执行观测映射：仅返回位置信息
% 假设传感器（如 GPS）只能观测机器人的位置，不能观测其朝向
% 因此，测量值 y 就是当前状态的位置分量 state.p
y = state.p;

% 注意：
%   - 输出 y 是一个 2×1 列向量 [x; y]
%   - 该函数是非线性的（从流形状态到欧氏测量），但在本例中形式简单
%   - 若使用视觉或激光雷达等其他传感器，h 函数会更复杂（可能涉及投影、特征匹配等）

% 函数结束
end